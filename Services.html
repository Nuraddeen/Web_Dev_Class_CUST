<!DOCTYPE html>
<html lang="en">
<head>
  <title> SERVICES </title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="styles/bootstrap.min.css">
  <script src="js/jquery.min.js"></script>
  <script src="js/popper.min.js"></script>
  <script src="js/bootstrap.min.js"></script>


</head>

<body>

	<div class="container">
		<h1> SERVICES SELECTION </h1>


		<div class="row"> 
				<div class="col-12">
					Select Service:  <br/>
					<select class="form-control" id = "services-list" >
						<option value=""></option> 
						<option value="Formatting">Formatting</option>
						<option value="Cleaning">Cleaning</option>
						<option value="Typing">Typing</option>
						<option value="Tutoring">Tutoring</option>
						<option value="Guidance">Guidance</option>
						<option value="Adverts">Adverts</option>
						<option value="Travel">Travel</option>
						<option value="Tourisms">Tourisms</option>
						<option value="Sewing">Sewing</option>
						<option value="Marketing">Marketing</option>
					</select>
				</div>

		</div>

<br/> <br/>

<!-- notification div -->

<div id="notice-board" class="alert alert-danger">
	Please select a service above
</div>

<br/> <br/>

		<div class="row">

		<div class="col-4 bg-warning"> 
			<button class="btn btn-success" onclick="addService('user1')"> User 1 </button>
			<input type="text" id="user1-services" hidden>

			 <!-- <ol> 
				<li> Tailoring </li>
				<li> Tailoring </li>
				<li> Tailoring </li>

			</ol>
			-->

			<div id = "user1-services-lists"></div>

		</div>



		<div class="col-4 bg-info"> 
			<button class="btn btn-success"  onclick="addService('user2')"> User 2 </button>
			<input type="text" id="user2-services" hidden="hidden">

			<div id = "user2-services-lists"></div>

		</div>



		<div class="col-4 bg-danger"> 
			<button class="btn btn-success"  onclick="addService('user3')"> User 3 </button>
			<input type="text" id="user3-services" style="display: none">

			<div id = "user3-services-lists"></div>

		</div>



		</div>
	
	</div> <!-- end container  div !-->
	

	
	<script >



			/*function to show notification */
			function showNotice(notice) {
				$("#notice-board").html(notice);
			}



			function getServices(userName) {
						//cget selected services for the user
				var currentServices = 	$("#"+userName+"-services").val();

				//convert string to array	
				return currentServices.split(";");

				//return services;
			}

			



		function showServicesList(userName) {
			//get user services
			 services  = getServices(userName);

			 var html = "<ol>";

			 for (i =0; i<services.length; i++) {
			 	html += "<li>"+services[i]+"</li>";
			 }

			 html += "</ol>";

			 //display the services in the user div

			 $("#"+userName+"-services-lists").html(html);


		}






		function addService(userName){
			//get selected service
			var selectedService = $("#services-list").val();

			//alert(userName + " selected " +selectedService);

			//save user selection

			/* using ifs statements
			if (userName == "user1") {
				//get current services
				var currentServices = 	$("#user1-services").val();
				//set new services by appending current with selected one
				$("#user1-services").val(currentServices + selectedService);
			}
			else if (userName == "user2") {
				//get current services
				var currentServices = 	$("#user2-services").val();
				//set new services by appending current with selected one
				$("#user2-services").val(currentServices + selectedService);
			}
			
			else if (userName == "user3") {
				//get current services
				var currentServices = 	$("#user3-services").val();
				//set new services by appending current with selected one
				$("#user3-services").val(currentServices + selectedService);
			}
			*/



			//check if the selected service is invaluid

			if (selectedService == "" | selectedService == null ) {
				showNotice("Please a select a valid service ");
			}

			else if (getServices(userName).length == 3) {
				showNotice("You have reached maximum number of services ");
			}
		

			else {//add the service to the user	 

				//alert("jjhghh") ;

					var delimeter = "";


					var currentServices = 	$("#"+userName+"-services").val();

					if (currentServices != "" & currentServices != null) {
							delimeter = ";";
					}

					
					 
					if (wasSelected(selectedService)) {
						showNotice(selectedService + " was  already selected ");
					}
					else {
						//alert(selectedService + " was  NOT selected ");
		 				$("#"+userName+"-services").val(currentServices +delimeter+ selectedService);

		 				//show list
		 				showServicesList(userName);
					}


			}//end valid service name
			//optimzed code

			
			//set new services by appending current with selected one
		
					//$("#"+userName+"-services-lists").html(currentServices +delimeter+ selectedService);

		}//end function addservic


		function wasSelectedByUser1(serviceName) {
			//current services of user 1
			var currentServices = 	$("#user1-services").val();


			//convert string to array

			services = currentServices.split(";");

		/*	htmlList = "<ul>";
			for (i=0; i<services.length; i++) {
					htmlList += "<li> " +services[i] + " </li>";
			}

 			htmlList += "</ul>";
 			*/

 			//check whether this service is in the array

 			 
			
		}



		function wasSelected( serviceName) {
			//user 1
		
		 

			//
			for (i=1; i<=3; i++) {
			
				//cget selected services for the user
			/*	var currentServices = 	$("#user"+i+"-services").val();

				//convert string to array	
				services = currentServices.split(";");
				*/
               services  = getServices("user"+i);
 				//checking if the service name is in the array and returning true 
				if (services.includes(serviceName) ) {
					return true;

				}

			}//end for



			/**
			this func returns the services selected by the given user an array
			*/

		
			/*
							var currentServices = 	$("#user2-services").val();

							//convert string to array

						services = currentServices.split(";");

						if (services.includes(serviceName) ) {
								return true;
						}


						var currentServices = 	$("#user3-services").val();

							//convert string to array

						services = currentServices.split(";");

						if (services.includes(serviceName) ) {
								return true;
						}
			*/

				return false;

		}


	</script>

</body>
</html>